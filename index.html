<!DOCTYPE html>
<!--
  Green Fence AB ‚Äì Offert. √ñppna denna fil i webbl√§saren.
  Struktur: head (l√§nkar + EmailJS-config) ‚Üí body: staketformul√§r ‚Üí kunduppgifter ‚Üí offert (fylls via JS).
  Logo: js/logo-data.js. Stilar: css/style.css. Logik: js/*.js (data, fence-ui, map, quote-rows, quote, invoice-actions, app).
-->
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Offert Staket - Green Fence AB</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.css"
    />
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <a href="#staket-info-section" class="skip-link">Hoppa till offertformul√§r</a>

    <!-- ‚ïê‚ïê‚ïê Steg 1: Staketformul√§r (typ, l√§ngd, karta) ‚ïê‚ïê‚ïê -->
    <main class="form-section" id="staket-info-section">
      <div class="header-logo"><img id="header-logo-img" alt="Green Fence AB logotyp" src="" /></div>
      
      <fieldset class="fence-type-selector" aria-label="V√§lj st√§ngseltyp">
        <legend>V√§lj st√§ngseltyp</legend>
        <button type="button" class="fence-type-btn selected" data-fence-type="villa" onclick="selectFenceType('villa')" aria-label="V√§lj villastaket" aria-pressed="true">
          <span class="fence-type-icon">
            <img src="images/Sk√§rmbild 2025-12-22 113812.png" alt="" class="fence-type-img" aria-hidden="true" />
          </span>
          <span class="fence-type-title">Villast√§ngsel</span>
          <span class="fence-type-animals"></span>
        </button>
        <button type="button" class="fence-type-btn" data-fence-type="animal" onclick="selectFenceType('animal')" aria-label="V√§lj djurstaket" aria-pressed="false">
          <span class="fence-type-icon">
            <img src="images/Sk√§rmbild 2025-12-22 113855.png" alt="" class="fence-type-img" aria-hidden="true" />
          </span>
          <span class="fence-type-title">Djurst√§ngsel</span>
          <span class="fence-type-animals"></span>
        </button>
      </fieldset>
      
      <p style="font-weight: bold; margin-bottom: 10px">
        Om du redan k√§nner till m√•tten p√• ditt staket kan du ange dem h√§r
      </p>
      <label for="metratura">Total l√§ngd (m)</label>
      <input type="number" id="metratura" min="1" step="0.1" oninput="updateAnimalFenceInfo()" aria-describedby="animal-fence-info" />
      <div id="animal-fence-info" style="display: none; margin-top: 8px; padding: 12px; background: rgba(133, 171, 92, 0.1); border-radius: 8px; font-size: 13px; color: var(--text-secondary);">
        <i class="fas fa-info-circle"></i> <span id="animal-fence-text"></span>
      </div>
      <label for="angoli">Antal h√∂rn</label>
      <input type="number" id="angoli" min="0" step="1" />

      <div id="villa-options">
      <label for="farg">V√§lj f√§rg</label>
      <select id="farg" aria-label="V√§lj f√§rg p√• staket">
        <option value="Svart">Svart</option>
        <option value="M√∂rkgr√∂n">M√∂rkgr√∂n</option>
        <option value="Olivgr√∂n">Olivgr√∂n</option>
        <option value="Galvaniserad">Galvaniserad</option>
      </select>
      <label for="hojd">V√§lj h√∂jd</label>
      <select id="hojd" aria-label="V√§lj h√∂jd p√• staket">
        <option value="1m">1m</option>
        <option value="1,20m">1,20 m</option>
      </select>

      <!-- Enkeld√∂rr / Dubbeld√∂rr dovrebbe essere solo per Villast√§ngsel-->
    <div id="villagrindar-container" style="margin-top: 10px;">
      <div style="margin-bottom: 6px;">
        <label for="enkeldorr-antal">Enkel grindar (antal)</label>
        <input type="number" id="enkeldorr-antal" min="0" step="1" value="0" />
      </div>
      <div style="margin-bottom: 6px;">
        <label for="dubbeldorr-antal">Dubble grindar (antal)</label>
        <input type="number" id="dubbeldorr-antal" min="0" step="1" value="0" />
      </div>
    </div>
      
     <div style="width: 100%; display: flex; justify-content: center; margin-top: 10px;">
     <div style="display: flex; align-items: center; gap: 6px;">
     <input type="checkbox" id="plintbetong" style="transform: scale(1.2)" />
     <label for="plintbetong" style="cursor: pointer; white-space: nowrap;">
      L√§gg till Plintbetong (2 st/stolpe)
     </label>
     </div>
     </div>

      </div>
    

      
      <div id="gate-input-container">
        <label for="gates">Antal Tr√§grindar</label>
        <input type="number" id="gates" min="0" step="1" value="0" />
        <div class="gate-info">
          <i class="fas fa-info-circle"></i> Varje grind √§r 3x1 meter 
        </div>
      </div>

      <div id="electrify-container" class="electrify-card">
        <div class="electrify-card-inner">
          <input type="checkbox" id="electrify-fence" class="electrify-checkbox" />
          <label for="electrify-fence" class="electrify-label">
            <i class="fas fa-bolt" aria-hidden="true"></i> Elektrifiera din st√§ngsel
          </label>
        </div>
      </div>

        


      <section class="map-instructions" aria-labelledby="map-instructions-heading">
        <h2 id="map-instructions-heading" class="map-instructions-heading">Karta och ritning</h2>
        <p class="map-instructions-intro">S√∂k din adress eller rita staketet direkt p√• kartan. S√• h√§r g√∂r du:</p>
        <ul class="map-instructions-list">
          <li><strong>S√∂k:</strong> Anv√§nd s√∂kf√§ltet uppe till h√∂ger p√• kartan ‚Äì skriv adress eller plats och v√§lj ett f√∂rslag. Kartan flyttar sig till valt st√§lle.</li>
          <li><strong>‚úèÔ∏è Ny polylinje:</strong> Klicka f√∂r att b√∂rja rita ett nytt staket.</li>
          <li><strong>Punkter:</strong> Klicka p√• kartan f√∂r varje h√∂rn eller √§ndpunkt. Du kan dra punkterna f√∂r att justera.</li>
          <li><strong>üîó St√§ng staket:</strong> N√§r du √§r klar, klicka f√∂r att koppla sista punkten till den f√∂rsta (staket blir slutet).</li>
          <li><strong>Grindverktyg:</strong> Djurst√§ngsel: anv√§nd üö™ (tr√§grind). Villast√§ngsel: anv√§nd E (enkel grind) eller D (dubbel grind). Klicka p√• knappen, sedan p√• kartan ‚Äì om du klickar n√§ra staketlinjen snappar grinden till linjen. H√∂gerklicka p√• en grind f√∂r att ta bort den.</li>
          <li><strong>üóëÔ∏è Rensa allt:</strong> Tar bort alla ritade staket och grindar.</li>
        </ul>
      </section>
      <div id="map" class="map-container" role="application" aria-label="Karta: s√∂k adress eller rita stakets linje med verktygen till v√§nster"></div>
      <div id="polyline-summary" aria-live="polite" aria-atomic="true"></div>
      <button type="button" onclick="showCustomerStep()" aria-label="Forts√§tt till dina uppgifter"><i class="fas fa-arrow-right" aria-hidden="true"></i> N√§sta</button>
      
      <div class="footer-text">¬© All rights reserved | Green Fence AB</div>
    </main>

    <!-- ‚ïê‚ïê‚ïê Steg 2: Kunduppgifter ‚ïê‚ïê‚ïê -->
    <section id="customer-data-section" class="form-section hidden" aria-labelledby="customer-data-heading">
      <h1 id="customer-data-heading" class="customer-step-heading">Dina uppgifter</h1>
      <p class="customer-step-intro">Vi beh√∂ver n√•gra uppgifter f√∂r att kunna √•terkomma till dig och bekr√§fta din f√∂rfr√•gan.</p>

      <label for="customer-name">F√∂rnamn</label>
      <input type="text" id="customer-name" name="customer-name" autocomplete="given-name" placeholder="T.ex. Anna" />

      <label for="customer-surname">Efternamn</label>
      <input type="text" id="customer-surname" name="customer-surname" autocomplete="family-name" placeholder="T.ex. Andersson" />

      <label for="customer-address">Adress</label>
      <input type="text" id="customer-address" name="customer-address" autocomplete="street-address" placeholder="Gatuadress, postnummer och ort" />

      <label for="customer-email">E-post</label>
      <input type="email" id="customer-email" name="customer-email" autocomplete="email" placeholder="namn@exempel.se" />

      <label for="customer-phone">Telefon</label>
      <input type="tel" id="customer-phone" name="customer-phone" autocomplete="tel" placeholder="T.ex. 070-123 45 67" />

      <div class="customer-delivery-wrap">
        <input type="checkbox" id="customer-delivery" name="customer-delivery" />
        <label for="customer-delivery" class="customer-delivery-label">Jag √∂nskar leverans</label>
      </div>

      <div class="customer-next-info">
        <p><strong>N√§sta steg:</strong> P√• n√§sta sida f√•r du en f√∂rhandsgranskning av offerten (utkast). D√§r f√•r du m√∂jlighet att skicka utkastet till v√•r personal ‚Äì det sker automatiskt med ett klick, och vi √•terkommer till dig s√• snart vi kan f√∂r att bekr√§fta best√§llningen. Observera att vi f√∂rbeh√•ller oss r√§tten att g√∂ra n√∂dv√§ndiga justeringar i offerten om det skulle beh√∂vas innan slutlig bekr√§ftelse.</p>
      </div>

      <div class="customer-step-buttons">
        <button type="button" onclick="goBackToStaketForm()" class="button-secondary" aria-label="Tillbaka till staketformul√§r"><i class="fas fa-arrow-left" aria-hidden="true"></i> Tillbaka</button>
        <button type="button" onclick="goToInvoiceFromCustomer()" aria-label="G√• till offertf√∂rhandsgranskning"><i class="fas fa-arrow-right" aria-hidden="true"></i> Visa offert</button>
      </div>
      <div class="footer-text">¬© All rights reserved | Green Fence AB</div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Steg 3: Offert (fylls och visas via JS) ‚ïê‚ïê‚ïê -->
    <div id="invoice" class="hidden invoice"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <!-- EmailJS: s√§tt dina v√§rden h√§r (se EMAILJS_SETUP.md) -->
    <script>
      window.EMAILJS = {
        publicKey: "PASTE_YOUR_PUBLIC_KEY_HERE",
        serviceId: "PASTE_YOUR_SERVICE_ID_HERE",
        templateId: "PASTE_YOUR_TEMPLATE_ID_HERE"
      };
    </script>
    <script src="js/logo-data.js"></script>
    <script src="js/data.js"></script>
    <script src="js/fence-ui.js"></script>
    <script src="js/map.js"></script>
    <script src="js/quote-rows.js"></script>
    <script src="js/quote.js"></script>
    <script src="js/invoice-actions.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
